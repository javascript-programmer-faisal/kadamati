<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title> ржЕрж░рзНржбрж╛рж░ ржлрж░рзНржо</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- SwiperJS CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <style>
    body, html {
      margin: 0 !important;
      padding: 0 !important;
    }
    .max-w-6xl {
      max-width: 100% !important; /* тЬЕ ржкрзБрж░рзЛ ржкрзНрж░рж╕рзНрже ржирж┐ржмрзЗ */
    }
    .px-4 {
      padding-left: 0 !important; /* тЬЕ ржХрзЛржирзЛ padding ржерж╛ржХржмрзЗ ржирж╛ */
      padding-right: 0 !important;
    }
    @media (max-width: 768px) { 
        #sohel{
            font-size: 14px !important;
        }
        .object-cover {
          object-fit: cover;
          border-radius: 10px !important;
          box-shadow: 0px 0px 10px #6c6868 !important;
          border: 1px solid gray !important;
          width: 100px !important;
        }
    }
    .py-1 {
      padding-top: 0.25rem;
      padding-bottom: 0.25rem;
      width: 55px  !important;
      border-radius: 10px 20px 10px 20px !important;
    }
    .object-cover {
      object-fit: cover;
      border-radius: 10px !important;
      box-shadow: 0px 0px 10px #6c6868 !important;
      border: 1px solid gray !important;
      width: 70px !important;
    }
    /* тЬЕ Card Base */
#product-list > div {
    position: relative;
    transition: all 0.3s ease-in-out;
    border-radius: 14px !important;
    background: white;
    padding-bottom: 30px;
}

  /* тЬЕ Image Left */
#product-list img {
    float: left;
    margin-right: 10px;
    width: 85px !important;
    height: 80px !important;
    border-radius: 10px !important;
    object-fit: cover;
    box-shadow: 0 0 5px rgb(46 46 46 / 20%) !important;
}

  /* тЬЕ Product Name & Price */
  #product-list h4 {
    font-size: 15px;
    font-weight: bold;
    color: #333;
    margin: 2px 0 4px 0;
  }

#product-list p {
    font-size: 14px;
    color: #000000 !important;
    display: flex;
    justify-content: space-between;
    width: calc(100% - 90px);
    font-weight: bold;
    width: 98%;
}

  /* тЬЕ Quantity Input */
#product-list .qty-input {
    position: absolute;
    bottom: 40px;
    right: 10px;
    width: 45px !important;
    height: 30px !important;
    text-align: center;
    font-weight: bold;
    font-size: 14px;
    border-radius: 6px;
    padding: 2px !important;
}

  /* тЬЕ ржЫрзЛржЯ ржЯрзЗржХрзНрж╕ржЯ ржЗржиржкрзБржЯрзЗрж░ ржирж┐ржЪрзЗ */
#product-list > div::before {
    content: "ржЖржкржирж┐ ржХржд kg ржирзЗржмрзЗржи?";
    position: absolute;
    bottom: 12px;
    right: 10px;
    font-size: 12px;
    color: #000000;
    font-weight: 700;
}

  /* тЬЕ Active Card */
  #product-list > div.ring {
    background: rgba(0, 200, 83, 0.1) !important;
    border: 2px solid #00C853 !important;
    box-shadow: 0 0 8px rgba(0,200,83,0.3);
  }

  /* тЬЕ Checkout Mark (Input ржПрж░ ржУржкрж░рзЗ) */
  #product-list > div.ring::after {
    content: "тЬУ";
    position: absolute;
    top: 2px;
    right: 10px;
    background: #00C853;
    color: white;
    font-weight: bold;
    font-size: 16px;
    border-radius: 50%;
    width: 26px;
    height: 26px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 0 6px rgba(0,0,0,0.3);
  }
</style>

</head>
<body class="bg-gray-100 py-10 font-sans">







<div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 px-4">
  <!-- Left: Products -->
  <div>
    <h2 class="text-xl font-bold mb-4" style="color: #FF4500 !important;">ржЖржкржирж╛рж░ ржкржгрзНржпржЯрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржиред </h2>
    <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <!-- Product Cards dynamically added here -->
    </div>
  </div>

  <!-- Right: Form + Summary -->
  <div class="bg-white p-6 rounded-xl shadow flex flex-col justify-between">
    
    <!-- ЁЯУЭ Form Inputs -->
    <form id="order-form" method="POST" action="https://kadamati-3.onrender.com/submit-order" onsubmit="return submitForm(event)" class="space-y-3 mb-6">
      
      <!-- ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ -->
      <label class="block text-sm " style="font-size: 18px; font-weight: bold;">ржЖржкржирж╛рж░ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░</label>
      <input type="text" id="phone" name="phone" placeholder="ржЖржкржирж╛рж░ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░" required class="w-full border px-3 py-2 rounded">

      <!-- ржЖржкржирж╛рж░ ржирж╛ржо -->
      <label class="block text-sm " style="font-size: 18px; font-weight: bold;">ржЖржкржирж╛рж░ ржирж╛ржо</label>
      <input type="text" id="name" name="name" placeholder="ржЖржкржирж╛рж░ ржирж╛ржо" required class="w-full border px-3 py-2 rounded">
      
      <!-- ржЖржкржирж╛рж░ ржЬрзЗрж▓рж╛ -->
      <label class="block text-sm " style="font-size: 18px; font-weight: bold;">ржЖржкржирж╛рж░ ржЬрзЗрж▓рж╛</label>
      <input type="text" id="district" placeholder="ржЖржкржирж╛рж░ ржЬрзЗрж▓рж╛" required class="w-full border px-3 py-2 rounded">
      
      <!-- ржЖржкржирж╛рж░ ржЙржкржЬрзЗрж▓рж╛ -->
      <label class="block text-sm " style="font-size: 18px; font-weight: bold;">ржЖржкржирж╛рж░ ржЙржкржЬрзЗрж▓рж╛</label>
      <input type="text" id="upazila" placeholder="ржЖржкржирж╛рж░ ржЙржкржЬрзЗрж▓рж╛" required class="w-full border px-3 py-2 rounded">
      
      <!-- ржЧрзНрж░рж╛ржо / ржмрж╛рж╕рж╛ / рж░рзЛржб ржиржВ -->
      <label class="block text-sm" style="font-size: 18px; font-weight: bold;">ржЧрзНрж░рж╛ржо / ржмрж╛рж╕рж╛ / рж░рзЛржб ржиржВ</label>
      <input type="text" id="village" placeholder="ржЧрзНрж░рж╛ржо / ржмрж╛рж╕рж╛ / рж░рзЛржб ржиржВ " required class="w-full border px-3 py-2 rounded">

      <!-- Hidden Fields -->
      <input type="hidden" name="address" id="address">
      <input type="hidden" name="order_json" id="order_json">
      <input type="hidden" name="delivery_charge" id="delivery_charge">
      <input type="hidden" name="total_amount" id="total_amount">
    </form>

    <!-- ЁЯУЛ Order Summary -->
    <div>
      <h2 class="text-xl font-bold mb-4" style="font-size: 25px; font-weight: bold; color: #00C853;">ржЖржкржирж╛рж░ ржЕрж░рзНржбрж╛рж░ рждрж╛рж▓рж┐ржХрж╛ </h2>
      <div id="summary" class="space-y-4"></div>
      <div class="border-t mt-4 pt-4 space-y-2 text-sm">
        <div class="flex justify-between"><span style="font-size: 20px; font-weight: bold;">ржорзЛржЯ:</span><span id="subtotal">рз│0</span></div><hr><br>
        <div class="flex justify-between"><span style="font-size: 20px; font-weight: bold;">ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ:</span><span id="delivery">рз│0</span></div><br>
        <hr>
        <div class="flex justify-between font-bold text-lg"><span style="font-size: 25px; font-weight: bold;">рж╕рж░рзНржмржорзЛржЯ:</span><span id="total">рз│0</span></div><br>
      </div>

      <h3 class="text-lg font-semibold mt-6 " style="font-size: 25px;">ржХрзНржпрж╛рж╢ ржЕржи ржбрзЗрж▓рж┐ржнрж╛рж░рж┐:</h3>
      <div class="bg-green-50 border border-green-600 text-green-800 p-4 rounded mt-4 text-sm">
        <strong style="font-size: 20px; font-weight: bold; color: #00C853;" id="sohel">ржЖржкржирж╛рж░ ржкржгрзНржпржЯрж┐ рж╣рж╛рждрзЗ ржкрзЗрж▓рзЗ ржЯрж╛ржХрж╛ ржкрж░рж┐рж╢рзЛржз ржХрж░рзБржи |</strong> 
      </div>

      <!-- тЬЕ Final Order Button -->
      <button type="submit" form="order-form" class="w-full text-white py-3 rounded mt-6 hover:bg-green-700" style="font-size:30px; font-weight: bold; background-color: #22C55E !important; box-shadow:0px 0px 5px black; border:none;">
         ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржи
      </button>
    </div>
  </div>
</div>

<!-- тЬЕ Success Popup (Thank You Message) -->
<div id="successPopup" class="fixed top-1/3 left-1/2 transform -translate-x-1/2 bg-white text-center border border-green-600 text-green-700 px-6 py-5 rounded-xl shadow-lg hidden">
  <h2 class="text-xl font-bold mb-1">тЬЕ ржЕрж░рзНржбрж╛рж░ рж╕ржлрж▓ржнрж╛ржмрзЗ рж╕ржорзНржкржирзНржи рж╣ржпрж╝рзЗржЫрзЗ!</h2>
  <p class="text-sm">ржзржирзНржпржмрж╛ржж! ржЖржорж╛ржжрзЗрж░ ржЯрж┐ржо рж╢рзАржШрзНрж░ржЗ ржЖржкржирж╛рж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░ржмрзЗред</p>
</div>








<script>
const productsData = [
  { name: "ржмрзНрж▓рзНржпрж╛ржХ рж░рж╛ржЗрж╕ ржмрзАржЬ ржзрж╛ржи", price: 300, weight: 1, image: "https://kadamati.com/wp-content/uploads/2025/07/WhatsApp-Image-2025-07-19-at-04.11.28_27777f50-1024x877.jpg" },
  { name: "ржмрж╛рж╕ржорждрж┐ ржмрзАржЬ ржзрж╛ржи", price: 300, weight: 1, image: "https://kadamati.com/wp-content/uploads/2025/07/WhatsApp-Image-2025-07-19-at-04.06.35_d59ebb67-1024x740.jpg" },
  { name: "рж░ржб ржорж┐ржирж┐ржХрзЗржЯ ржмрзАржЬ ржзрж╛ржи", price: 200, weight: 1, image: "https://kadamati.com/wp-content/uploads/2025/07/AdobeStock_841571074-1024x683.jpg" },
  { name: "ржЪрж┐ржирж┐ ржЧрзБржбрж╝рж╛ ржмрзАржЬ ржзрж╛ржи", price: 200, weight: 1, image: "https://kadamati.com/wp-content/uploads/2025/07/Rectangle-122.png" },
  { name: "ржмрзНрж▓рж╛ржХ рж░рж╛ржЗрж╕ ржЪрж╛рж▓", price: 200, weight: 1, image: "https://kadamati.com/wp-content/uploads/2025/07/Rectangle-113-1.png" },
];

let selectedProducts = [];

function renderProducts() {
  const container = document.getElementById("product-list");
  container.innerHTML = "";
  productsData.forEach((p, idx) => {
    const div = document.createElement("div");
    div.className = "border p-3 rounded-xl bg-white hover:bg-green-50 cursor-pointer transition shadow";
    div.innerHTML = `
      <div class="flex items-center gap-3">
        <img src="${p.image}" class="h-16 w-16 object-cover rounded">
        <div><h4 class="font-semibold">${p.name}</h4><p class="text-sm text-gray-600">рз│${p.price} / ${p.weight}kg</p></div>
        <input type="number" value="1" min="1" class="ml-auto qty-input w-16 border rounded px-2 py-1">
      </div>`;
    div.onclick = (e) => {
      if (e.target.tagName === 'INPUT') return;
      const qty = parseInt(div.querySelector(".qty-input").value);
      const exists = selectedProducts.find(prod => prod.name === p.name);
      if (exists) {
        selectedProducts = selectedProducts.filter(item => item.name !== p.name);
        div.classList.remove("ring", "ring-green-400", "bg-green-100");
      } else {
        selectedProducts.push({ ...p, qty });
        div.classList.add("ring", "ring-green-400", "bg-green-100");
      }
      renderSummary();
    };
    div.querySelector(".qty-input").onchange = () => {
      const qty = parseInt(div.querySelector(".qty-input").value);
      const item = selectedProducts.find(prod => prod.name === p.name);
      if (item) { item.qty = qty; renderSummary(); }
    };
    container.appendChild(div);
  });
}

function renderProducts() {
  const container = document.getElementById("product-list");
  container.innerHTML = "";
  productsData.forEach((p, idx) => {
    const div = document.createElement("div");
    div.className = "border p-3 rounded-xl bg-white hover:bg-green-50 cursor-pointer transition shadow";
    div.innerHTML = `
      <div class="flex items-center gap-3">
        <img src="${p.image}" class="h-16 w-16 object-cover rounded">
        <div><h4 class="font-semibold">${p.name}</h4><p class="text-sm text-gray-600">рз│${p.price} / ${p.weight}kg</p></div>
        <input type="number" value="1" min="1" class="ml-auto qty-input w-16 border rounded px-2 py-1">
      </div>`;
    div.onclick = (e) => {
      if (e.target.tagName === 'INPUT') return;
      const qty = parseInt(div.querySelector(".qty-input").value);
      const exists = selectedProducts.find(prod => prod.name === p.name);
      if (exists) {
        selectedProducts = selectedProducts.filter(item => item.name !== p.name);
        div.classList.remove("ring", "ring-green-400", "bg-green-100");
      } else {
        selectedProducts.push({ ...p, qty });
        div.classList.add("ring", "ring-green-400", "bg-green-100");
      }
      renderSummary();
    };
    div.querySelector(".qty-input").onchange = () => {
      const qty = parseInt(div.querySelector(".qty-input").value);
      const item = selectedProducts.find(prod => prod.name === p.name);
      if (item) { item.qty = qty; renderSummary(); }
    };
    container.appendChild(div);
  });
}

function renderSummary() {
  const wrapper = document.getElementById("summary");
  wrapper.innerHTML = "";
  let subtotal = 0, totalWeight = 0;

  selectedProducts.forEach((item, idx) => {
    subtotal += item.price * item.qty;
    totalWeight += item.weight * item.qty;
    const div = document.createElement("div");
    div.className = "flex justify-between items-center border-b pb-2 text-sm";
    div.innerHTML = `
      <div class="flex items-center gap-2">
        <img src="${item.image}" class="h-10 w-10 rounded object-cover"><span>${item.name} ├Ч ${item.qty}</span>
      </div>
      <div class="flex items-center gap-2">
        <span>рз│${item.price * item.qty}</span>
        <span onclick="removeProduct(${idx})" class="text-red-600 cursor-pointer"><img src="https://cdn-icons-png.flaticon.com/512/3405/3405244.png" class="h-4 w-4 inline"></span>
      </div>`;
    wrapper.appendChild(div);
  });

  // тЬЕ Delivery Charge Calculation (Modified)
  let delivery = 0;
  if (selectedProducts.length) {
    if (totalWeight <= 1) {
      delivery = 100;
    } else {
      delivery = 100 + Math.ceil(totalWeight - 1) * 20;
    }
  }

  const total = subtotal + delivery;
  document.getElementById("subtotal").innerText = `рз│${subtotal}`;
  document.getElementById("delivery").innerText = `рз│${delivery}`;
  document.getElementById("total").innerText = `рз│${total}`;
  document.getElementById("order_json").value = JSON.stringify(selectedProducts);
  document.getElementById("delivery_charge").value = delivery;
  document.getElementById("total_amount").value = total;
}

function removeProduct(index) {
  selectedProducts.splice(index, 1);
  renderProducts();
  renderSummary();
}

function submitForm(e) {
  e.preventDefault();

  if (!selectedProducts.length) {
    alert("ржХржоржкржХрзНрж╖рзЗ ржПржХржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи!");
    return false;
  }

  const fullAddress = 
    "ржЬрзЗрж▓рж╛: " + document.getElementById("district").value + ", " +
    "ржЙржкржЬрзЗрж▓рж╛: " + document.getElementById("upazila").value + ", " +
    "ржарж┐ржХрж╛ржирж╛: " + document.getElementById("village").value;
  document.getElementById("address").value = fullAddress;

  const form = document.getElementById("order-form");
  const formData = new FormData(form);

  fetch(form.action, {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(data => {
    document.getElementById("successPopup").classList.remove("hidden");
    setTimeout(() => document.getElementById("successPopup").classList.add("hidden"), 3000);

    form.reset();
    selectedProducts = [];
    renderProducts();
    renderSummary();
  })
  .catch(err => alert("ржЕрж░рзНржбрж╛рж░ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи!"));

  return false;
}

renderProducts();
</script>
</body>
</html>
